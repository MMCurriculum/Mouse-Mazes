{"ast":null,"code":"import React,{useState,useCallback,useRef,useEffect}from'react';import{GameControls}from'./components/GameControls/GameControls';import{GameBoard}from'./components/GameBoard/GameBoard';import{SidePanel}from'./components/SidePanel/SidePanel';import{useMazeGame}from'./hooks/useMazeGame';import{useMazeCanvas}from'./hooks/useMazeCanvas';import{useAnimation}from'./hooks/useAnimation';import{emptyGrid,simulateHoleWithGrid,computeMappingForGrid}from'./utils/mazeUtils';import styles from'./App.module.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[mode,setMode]=useState('intro');const[mazeType,setMazeType]=useState('walls');const[level,setLevel]=useState('beginner');const[prompt,setPrompt]=useState('Click \"Start New Game\" to begin.\\nIn Introduction mode, you\\'ll get 8 questions on the same maze.\\nIn Inference mode, you\\'ll probe the maze and build your own model.');const[promptIsHTML,setPromptIsHTML]=useState(false);const[feedback,setFeedback]=useState('');const[feedbackClass,setFeedbackClass]=useState('');const[logEntries,setLogEntries]=useState([]);const[questionHistory,setQuestionHistory]=useState([]);const[showHiddenModel,setShowHiddenModel]=useState(false);const[modelDidNotMatch,setModelDidNotMatch]=useState(false);const mouseMarkerRef=useRef(null);const holeRefs=useRef([]);const game=useMazeGame(mazeType,level,mode);const gridToDraw=mode==='intro'?game.realGrid:game.modelGrid;const hiddenGrid=mode==='inference'&&showHiddenModel?game.realGrid:null;const{canvasRef,ctxRef,drawMaze}=useMazeCanvas(gridToDraw,hiddenGrid);const{animating,animatePath,animateInferenceProbe}=useAnimation(ctxRef,canvasRef,drawMaze,mouseMarkerRef);const formatQuestionPrompt=useCallback((question,questionIndex,totalQuestions,mazeType,toggleIntroColor)=>{const color=toggleIntroColor()?\"#e67e22\":\"#1f6ad3\";let scenarioLine=\"\";let rest=\"\";if(question.mode===\"forward\"){scenarioLine=\"A mouse leaves hole \".concat(question.startHole,\".\");const extra=mazeType===\"arrows\"?' (You can also choose \"The Mouse Doesn\\'t Come Out!\")':\"\";rest=\"Where will it come out? Click a hole.\".concat(extra);}else if(question.mode===\"reverseWalls\"){scenarioLine=\"A mouse ends up in hole \".concat(question.endHole,\".\");rest=\"From which hole did it start? Click a starting hole.\";}else{scenarioLine=\"A mouse ends up in hole \".concat(question.endHole,\".\");rest=\"Click on one hole that could have been its starting hole.\";}return\"Question \".concat(questionIndex,\" of \").concat(totalQuestions,\":<br>\")+\"<span style=\\\"font-weight:bold;color:\".concat(color,\";\\\">\").concat(scenarioLine,\"</span><br>\")+\"\".concat(rest);},[]);const formatQuestionForLog=useCallback((question,questionIndex,mazeType)=>{let scenarioLine=\"\";let rest=\"\";if(question.mode===\"forward\"){scenarioLine=\"A mouse leaves hole \".concat(question.startHole,\".\");rest=\"Where will it come out?\";}else if(question.mode===\"reverseWalls\"){scenarioLine=\"A mouse ends up in hole \".concat(question.endHole,\".\");rest=\"From which hole did it start?\";}else{scenarioLine=\"A mouse ends up in hole \".concat(question.endHole,\".\");rest=\"Click on one hole that could have been its starting hole.\";}return\"\".concat(scenarioLine,\" \").concat(rest);},[]);// Track previous question to add to log when new question appears\nconst prevQuestionRef=useRef(null);const prevQuestionIndexRef=useRef(0);// Update prompt when mode changes\nuseEffect(()=>{if(mode==='intro'){setPrompt('Introduction mode:\\nClick \"Start New Game\" to get 8 questions on the same maze.\\nAnswer by clicking a hole (or \"The Mouse Doesn\\'t Come Out!\" when appropriate).');setPromptIsHTML(false);}else{setPrompt('Inference mode:\\nClick mouse holes to probe the hidden maze (log appears below).\\nClick inside rooms to set your model (blank / wall / arrow).\\nWhen you\\'re ready, press \"Test My Model\".');setPromptIsHTML(false);}setFeedback('');setFeedbackClass('');setQuestionHistory([]);prevQuestionRef.current=null;prevQuestionIndexRef.current=0;setShowHiddenModel(false);setModelDidNotMatch(false);},[mode]);// Update prompt when question changes\nuseEffect(()=>{if(mode==='intro'&&game.currentQuestion&&game.questionIndex>0&&game.questionIndex<=game.TOTAL_QUESTIONS&&game.toggleIntroColor){// If we have a previous question and the index increased, add it to the log\nif(prevQuestionRef.current&&game.questionIndex>prevQuestionIndexRef.current){const questionText=formatQuestionForLog(prevQuestionRef.current,prevQuestionIndexRef.current,mazeType);setQuestionHistory(prev=>[...prev,{questionNumber:prevQuestionIndexRef.current,questionText:questionText}]);}setPrompt(formatQuestionPrompt(game.currentQuestion,game.questionIndex,game.TOTAL_QUESTIONS,mazeType,game.toggleIntroColor));setPromptIsHTML(true);// Update refs for next time\nprevQuestionRef.current=game.currentQuestion;prevQuestionIndexRef.current=game.questionIndex;}},[game.currentQuestion,game.questionIndex,mode,mazeType,formatQuestionPrompt,formatQuestionForLog,game.TOTAL_QUESTIONS]);const handleModeChange=useCallback(newMode=>{setMode(newMode);},[]);const handleMazeTypeChange=useCallback(newMazeType=>{setMazeType(newMazeType);},[]);// Automatically start new game when maze type changes\nconst prevMazeTypeRef=useRef(mazeType);const isInitialMountRef=useRef(true);useEffect(()=>{// Skip on initial mount\nif(isInitialMountRef.current){isInitialMountRef.current=false;prevMazeTypeRef.current=mazeType;return;}// Only trigger if maze type actually changed\nif(prevMazeTypeRef.current!==mazeType){// Start new game automatically\nif(mode==='intro'){const result=game.startIntroGame();if(result&&result.question&&game.toggleIntroColor){setPrompt(formatQuestionPrompt(result.question,result.questionIndex,game.TOTAL_QUESTIONS,mazeType,game.toggleIntroColor));setPromptIsHTML(true);prevQuestionRef.current=result.question;prevQuestionIndexRef.current=result.questionIndex;}setFeedback('');setFeedbackClass('');setQuestionHistory([]);}else{game.startInferenceGame();setPrompt('Inference mode:\\nClick mouse holes to probe the hidden maze (log appears below).\\nClick inside rooms to set your model (blank / wall / arrow).\\nWhen you\\'re ready, press \"Test My Model\".');setPromptIsHTML(false);setFeedback('');setFeedbackClass('');setLogEntries([]);prevQuestionRef.current=null;prevQuestionIndexRef.current=0;}// Reset hidden model display when maze type changes\nsetShowHiddenModel(false);setModelDidNotMatch(false);}prevMazeTypeRef.current=mazeType;},[mazeType,mode,game,formatQuestionPrompt]);const handleLevelChange=useCallback(newLevel=>{setLevel(newLevel);},[]);const handleNewGame=useCallback(()=>{if(mode==='intro'){const result=game.startIntroGame();if(result&&result.question&&game.toggleIntroColor){setPrompt(formatQuestionPrompt(result.question,result.questionIndex,game.TOTAL_QUESTIONS,mazeType,game.toggleIntroColor));setPromptIsHTML(true);prevQuestionRef.current=result.question;prevQuestionIndexRef.current=result.questionIndex;}setFeedback('');setFeedbackClass('');setQuestionHistory([]);setModelDidNotMatch(false);setShowHiddenModel(false);}else{game.startInferenceGame();setPrompt('Inference mode:\\nClick mouse holes to probe the hidden maze (log appears below).\\nClick inside rooms to set your model (blank / wall / arrow).\\nWhen you\\'re ready, press \"Test My Model\".');setPromptIsHTML(false);setFeedback('');setFeedbackClass('');setLogEntries([]);prevQuestionRef.current=null;prevQuestionIndexRef.current=0;setShowHiddenModel(false);setModelDidNotMatch(false);}},[mode,game,mazeType,formatQuestionPrompt]);const handleHoleClick=useCallback(holeNum=>{if(animating)return;if(mode==='intro'){const result=game.handleIntroAnswer(holeNum,false);if(!result)return;animatePath(result.info.path,result.info.exitHole,result.info.trapped,result.animStartHole,()=>{const feedbackResult=result.after();if(feedbackResult){setFeedback(feedbackResult.feedback);setFeedbackClass(feedbackResult.feedbackClass);if(feedbackResult.isCorrect!==undefined){// Update score display will happen automatically via game state\nsetTimeout(()=>{if(game.questionIndex<game.TOTAL_QUESTIONS){// Get next question\ngame.nextQuestion(game.mapping);// Question will be set in state, we'll update prompt in useEffect\n}else{setPrompt('Game over. You\\'ve answered all 8 questions.');setPromptIsHTML(false);// Score is already updated in the hook, but we need to account for the current answer\nconst finalScore=feedbackResult.isCorrect?game.score+1:game.score;setFeedback(\"You made \".concat(finalScore,\" out of \").concat(game.TOTAL_QUESTIONS,\" correct predictions.\"));setFeedbackClass('');}setTimeout(()=>{if(game.questionIndex<game.TOTAL_QUESTIONS){setFeedback('');setFeedbackClass('');}},3000);},1800);}}},gridToDraw);}else{const{info,probeCount}=game.handleInferenceProbe(holeNum);animateInferenceProbe(holeNum,info,()=>{if(info.trapped){setFeedback(\"The mouse from hole \".concat(holeNum,\" is stuck in the house forever.\"));}else{setFeedback(\"The mouse from hole \".concat(holeNum,\" came out of hole \").concat(info.exitHole,\".\"));}setFeedbackClass('');const entry=info.trapped?\"From \".concat(holeNum,\" \\u2192 (stuck inside)\"):\"From \".concat(holeNum,\" \\u2192 \").concat(info.exitHole);setLogEntries(prev=>[...prev,entry]);},holeRefs.current);}},[mode,animating,game,animatePath,animateInferenceProbe,gridToDraw,mazeType,formatQuestionPrompt]);const handleNoExitClick=useCallback(()=>{if(animating||mode!=='intro')return;const result=game.handleIntroAnswer(null,true);if(!result)return;animatePath(result.info.path,result.info.exitHole,result.info.trapped,result.animStartHole,()=>{const feedbackResult=result.after();if(feedbackResult){setFeedback(feedbackResult.feedback);setFeedbackClass(feedbackResult.feedbackClass);setTimeout(()=>{if(game.questionIndex<game.TOTAL_QUESTIONS){game.nextQuestion(game.mapping);// Question will be set in state, we'll update prompt in useEffect\n}else{setPrompt('Game over. You\\'ve answered all 8 questions.');setPromptIsHTML(false);// Score is already updated in the hook, but we need to account for the current answer\nconst finalScore=feedbackResult.isCorrect?game.score+1:game.score;setFeedback(\"You made \".concat(finalScore,\" out of \").concat(game.TOTAL_QUESTIONS,\" correct predictions.\"));setFeedbackClass('');}setTimeout(()=>{if(game.questionIndex<game.TOTAL_QUESTIONS){setFeedback('');setFeedbackClass('');}},3000);},1800);}},gridToDraw);},[animating,mode,game,animatePath,gridToDraw,mazeType,formatQuestionPrompt]);const handleCanvasClick=useCallback((r,c)=>{if(mode!=='inference'||animating)return;// If showing hidden model, switch back to user's model when they edit\nif(showHiddenModel){setShowHiddenModel(false);}let val=game.modelGrid[r][c];if(mazeType==='walls'){const seq=['','/','\\\\'];let idx=seq.indexOf(val);if(idx===-1)idx=0;val=seq[(idx+1)%seq.length];}else{const seq=['','U','R','D','L'];let idx=seq.indexOf(val);if(idx===-1)idx=0;val=seq[(idx+1)%seq.length];}game.updateModelGrid(r,c,val);},[mode,animating,game,mazeType,showHiddenModel]);const handleTestModel=useCallback(()=>{if(mode!=='inference')return;const result=game.testModel();console.log('handleTestModel result:',result);setFeedback(result.feedback);setFeedbackClass('');// Show \"Show Hidden Model\" button if model didn't match perfectly\nconst shouldShowButton=result.didNotMatch===true;console.log('shouldShowButton:',shouldShowButton,'result.didNotMatch:',result.didNotMatch);setModelDidNotMatch(shouldShowButton);// Reset show hidden model when testing again\nsetShowHiddenModel(false);},[mode,game]);const handleShowHiddenModel=useCallback(()=>{setShowHiddenModel(true);},[]);return/*#__PURE__*/_jsxs(\"div\",{className:styles.app,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.header,children:[/*#__PURE__*/_jsx(\"img\",{src:(process.env.PUBLIC_URL||'.')+'/MouseInAHole.png',alt:\"Mouse Mazes Logo\",className:styles.logo}),/*#__PURE__*/_jsx(\"h1\",{className:styles.title,children:\"Mouse Mazes\"})]}),/*#__PURE__*/_jsx(GameControls,{mode:mode,mazeType:mazeType,level:level,onModeChange:handleModeChange,onMazeTypeChange:handleMazeTypeChange,onLevelChange:handleLevelChange,onNewGame:handleNewGame}),/*#__PURE__*/_jsxs(\"div\",{className:styles.gameArea,children:[/*#__PURE__*/_jsx(GameBoard,{mode:mode,gridToDraw:gridToDraw,animating:animating,onHoleClick:handleHoleClick,onCanvasClick:handleCanvasClick,mouseMarkerRef:mouseMarkerRef,holeRefs:holeRefs,canvasRef:canvasRef}),/*#__PURE__*/_jsx(SidePanel,{mode:mode,mazeType:mazeType,prompt:prompt,promptIsHTML:promptIsHTML,feedback:feedback,feedbackClass:feedbackClass,score:game.score,questionIndex:game.questionIndex,totalQuestions:game.TOTAL_QUESTIONS,onTestModel:handleTestModel,onNoExitClick:handleNoExitClick,logEntries:logEntries,questionHistory:questionHistory,onShowHiddenModel:handleShowHiddenModel,showHiddenModelButton:(()=>{const shouldShow=modelDidNotMatch&&!showHiddenModel;console.log('SidePanel prop calculation - modelDidNotMatch:',modelDidNotMatch,'showHiddenModel:',showHiddenModel,'shouldShow:',shouldShow);return shouldShow;})()})]})]});}export default App;","map":{"version":3,"names":["React","useState","useCallback","useRef","useEffect","GameControls","GameBoard","SidePanel","useMazeGame","useMazeCanvas","useAnimation","emptyGrid","simulateHoleWithGrid","computeMappingForGrid","styles","jsx","_jsx","jsxs","_jsxs","App","mode","setMode","mazeType","setMazeType","level","setLevel","prompt","setPrompt","promptIsHTML","setPromptIsHTML","feedback","setFeedback","feedbackClass","setFeedbackClass","logEntries","setLogEntries","questionHistory","setQuestionHistory","showHiddenModel","setShowHiddenModel","modelDidNotMatch","setModelDidNotMatch","mouseMarkerRef","holeRefs","game","gridToDraw","realGrid","modelGrid","hiddenGrid","canvasRef","ctxRef","drawMaze","animating","animatePath","animateInferenceProbe","formatQuestionPrompt","question","questionIndex","totalQuestions","toggleIntroColor","color","scenarioLine","rest","concat","startHole","extra","endHole","formatQuestionForLog","prevQuestionRef","prevQuestionIndexRef","current","currentQuestion","TOTAL_QUESTIONS","questionText","prev","questionNumber","handleModeChange","newMode","handleMazeTypeChange","newMazeType","prevMazeTypeRef","isInitialMountRef","result","startIntroGame","startInferenceGame","handleLevelChange","newLevel","handleNewGame","handleHoleClick","holeNum","handleIntroAnswer","info","path","exitHole","trapped","animStartHole","feedbackResult","after","isCorrect","undefined","setTimeout","nextQuestion","mapping","finalScore","score","probeCount","handleInferenceProbe","entry","handleNoExitClick","handleCanvasClick","r","c","val","seq","idx","indexOf","length","updateModelGrid","handleTestModel","testModel","console","log","shouldShowButton","didNotMatch","handleShowHiddenModel","className","app","children","header","src","process","env","PUBLIC_URL","alt","logo","title","onModeChange","onMazeTypeChange","onLevelChange","onNewGame","gameArea","onHoleClick","onCanvasClick","onTestModel","onNoExitClick","onShowHiddenModel","showHiddenModelButton","shouldShow"],"sources":["/Users/joshuaabrams/Library/CloudStorage/Dropbox/Professional Development Activities & Workshops/*Making Math Website/VariedContent/Geometry/LogicAndReasoning/MouseMazes/mouse-mazes-react/src/App.jsx"],"sourcesContent":["import React, { useState, useCallback, useRef, useEffect } from 'react';\nimport { GameControls } from './components/GameControls/GameControls';\nimport { GameBoard } from './components/GameBoard/GameBoard';\nimport { SidePanel } from './components/SidePanel/SidePanel';\nimport { useMazeGame } from './hooks/useMazeGame';\nimport { useMazeCanvas } from './hooks/useMazeCanvas';\nimport { useAnimation } from './hooks/useAnimation';\nimport { emptyGrid, simulateHoleWithGrid, computeMappingForGrid } from './utils/mazeUtils';\nimport styles from './App.module.css';\n\nfunction App() {\n  const [mode, setMode] = useState('intro');\n  const [mazeType, setMazeType] = useState('walls');\n  const [level, setLevel] = useState('beginner');\n  const [prompt, setPrompt] = useState('Click \"Start New Game\" to begin.\\nIn Introduction mode, you\\'ll get 8 questions on the same maze.\\nIn Inference mode, you\\'ll probe the maze and build your own model.');\n  const [promptIsHTML, setPromptIsHTML] = useState(false);\n  const [feedback, setFeedback] = useState('');\n  const [feedbackClass, setFeedbackClass] = useState('');\n  const [logEntries, setLogEntries] = useState([]);\n  const [questionHistory, setQuestionHistory] = useState([]);\n  const [showHiddenModel, setShowHiddenModel] = useState(false);\n  const [modelDidNotMatch, setModelDidNotMatch] = useState(false);\n  \n  const mouseMarkerRef = useRef(null);\n  const holeRefs = useRef([]);\n  \n  const game = useMazeGame(mazeType, level, mode);\n  const gridToDraw = mode === 'intro' ? game.realGrid : game.modelGrid;\n  const hiddenGrid = mode === 'inference' && showHiddenModel ? game.realGrid : null;\n  const { canvasRef, ctxRef, drawMaze } = useMazeCanvas(gridToDraw, hiddenGrid);\n  const { animating, animatePath, animateInferenceProbe } = useAnimation(\n    ctxRef,\n    canvasRef,\n    drawMaze,\n    mouseMarkerRef\n  );\n\n  const formatQuestionPrompt = useCallback((question, questionIndex, totalQuestions, mazeType, toggleIntroColor) => {\n    const color = toggleIntroColor() ? \"#e67e22\" : \"#1f6ad3\";\n    let scenarioLine = \"\";\n    let rest = \"\";\n\n    if (question.mode === \"forward\") {\n      scenarioLine = `A mouse leaves hole ${question.startHole}.`;\n      const extra = (mazeType === \"arrows\")\n        ? ' (You can also choose \"The Mouse Doesn\\'t Come Out!\")'\n        : \"\";\n      rest = `Where will it come out? Click a hole.${extra}`;\n    } else if (question.mode === \"reverseWalls\") {\n      scenarioLine = `A mouse ends up in hole ${question.endHole}.`;\n      rest = \"From which hole did it start? Click a starting hole.\";\n    } else {\n      scenarioLine = `A mouse ends up in hole ${question.endHole}.`;\n      rest = \"Click on one hole that could have been its starting hole.\";\n    }\n\n    return `Question ${questionIndex} of ${totalQuestions}:<br>` +\n      `<span style=\"font-weight:bold;color:${color};\">${scenarioLine}</span><br>` +\n      `${rest}`;\n  }, []);\n\n  const formatQuestionForLog = useCallback((question, questionIndex, mazeType) => {\n    let scenarioLine = \"\";\n    let rest = \"\";\n\n    if (question.mode === \"forward\") {\n      scenarioLine = `A mouse leaves hole ${question.startHole}.`;\n      rest = \"Where will it come out?\";\n    } else if (question.mode === \"reverseWalls\") {\n      scenarioLine = `A mouse ends up in hole ${question.endHole}.`;\n      rest = \"From which hole did it start?\";\n    } else {\n      scenarioLine = `A mouse ends up in hole ${question.endHole}.`;\n      rest = \"Click on one hole that could have been its starting hole.\";\n    }\n\n    return `${scenarioLine} ${rest}`;\n  }, []);\n\n  // Track previous question to add to log when new question appears\n  const prevQuestionRef = useRef(null);\n  const prevQuestionIndexRef = useRef(0);\n\n  // Update prompt when mode changes\n  useEffect(() => {\n    if (mode === 'intro') {\n      setPrompt('Introduction mode:\\nClick \"Start New Game\" to get 8 questions on the same maze.\\nAnswer by clicking a hole (or \"The Mouse Doesn\\'t Come Out!\" when appropriate).');\n      setPromptIsHTML(false);\n    } else {\n      setPrompt('Inference mode:\\nClick mouse holes to probe the hidden maze (log appears below).\\nClick inside rooms to set your model (blank / wall / arrow).\\nWhen you\\'re ready, press \"Test My Model\".');\n      setPromptIsHTML(false);\n    }\n    setFeedback('');\n    setFeedbackClass('');\n    setQuestionHistory([]);\n    prevQuestionRef.current = null;\n    prevQuestionIndexRef.current = 0;\n    setShowHiddenModel(false);\n    setModelDidNotMatch(false);\n  }, [mode]);\n\n  // Update prompt when question changes\n  useEffect(() => {\n    if (mode === 'intro' && game.currentQuestion && game.questionIndex > 0 && game.questionIndex <= game.TOTAL_QUESTIONS && game.toggleIntroColor) {\n      // If we have a previous question and the index increased, add it to the log\n      if (prevQuestionRef.current && game.questionIndex > prevQuestionIndexRef.current) {\n        const questionText = formatQuestionForLog(prevQuestionRef.current, prevQuestionIndexRef.current, mazeType);\n        setQuestionHistory(prev => [...prev, {\n          questionNumber: prevQuestionIndexRef.current,\n          questionText: questionText\n        }]);\n      }\n      \n      setPrompt(formatQuestionPrompt(game.currentQuestion, game.questionIndex, game.TOTAL_QUESTIONS, mazeType, game.toggleIntroColor));\n      setPromptIsHTML(true);\n      \n      // Update refs for next time\n      prevQuestionRef.current = game.currentQuestion;\n      prevQuestionIndexRef.current = game.questionIndex;\n    }\n  }, [game.currentQuestion, game.questionIndex, mode, mazeType, formatQuestionPrompt, formatQuestionForLog, game.TOTAL_QUESTIONS]);\n\n  const handleModeChange = useCallback((newMode) => {\n    setMode(newMode);\n  }, []);\n\n  const handleMazeTypeChange = useCallback((newMazeType) => {\n    setMazeType(newMazeType);\n  }, []);\n\n  // Automatically start new game when maze type changes\n  const prevMazeTypeRef = useRef(mazeType);\n  const isInitialMountRef = useRef(true);\n  useEffect(() => {\n    // Skip on initial mount\n    if (isInitialMountRef.current) {\n      isInitialMountRef.current = false;\n      prevMazeTypeRef.current = mazeType;\n      return;\n    }\n    \n    // Only trigger if maze type actually changed\n    if (prevMazeTypeRef.current !== mazeType) {\n      // Start new game automatically\n      if (mode === 'intro') {\n        const result = game.startIntroGame();\n        if (result && result.question && game.toggleIntroColor) {\n          setPrompt(formatQuestionPrompt(result.question, result.questionIndex, game.TOTAL_QUESTIONS, mazeType, game.toggleIntroColor));\n          setPromptIsHTML(true);\n          prevQuestionRef.current = result.question;\n          prevQuestionIndexRef.current = result.questionIndex;\n        }\n        setFeedback('');\n        setFeedbackClass('');\n        setQuestionHistory([]);\n      } else {\n        game.startInferenceGame();\n        setPrompt('Inference mode:\\nClick mouse holes to probe the hidden maze (log appears below).\\nClick inside rooms to set your model (blank / wall / arrow).\\nWhen you\\'re ready, press \"Test My Model\".');\n        setPromptIsHTML(false);\n        setFeedback('');\n        setFeedbackClass('');\n        setLogEntries([]);\n        prevQuestionRef.current = null;\n        prevQuestionIndexRef.current = 0;\n      }\n      // Reset hidden model display when maze type changes\n      setShowHiddenModel(false);\n      setModelDidNotMatch(false);\n    }\n    prevMazeTypeRef.current = mazeType;\n  }, [mazeType, mode, game, formatQuestionPrompt]);\n\n  const handleLevelChange = useCallback((newLevel) => {\n    setLevel(newLevel);\n  }, []);\n\n  const handleNewGame = useCallback(() => {\n    if (mode === 'intro') {\n      const result = game.startIntroGame();\n      if (result && result.question && game.toggleIntroColor) {\n        setPrompt(formatQuestionPrompt(result.question, result.questionIndex, game.TOTAL_QUESTIONS, mazeType, game.toggleIntroColor));\n        setPromptIsHTML(true);\n        prevQuestionRef.current = result.question;\n        prevQuestionIndexRef.current = result.questionIndex;\n      }\n      setFeedback('');\n      setFeedbackClass('');\n      setQuestionHistory([]);\n      setModelDidNotMatch(false);\n      setShowHiddenModel(false);\n    } else {\n      game.startInferenceGame();\n      setPrompt('Inference mode:\\nClick mouse holes to probe the hidden maze (log appears below).\\nClick inside rooms to set your model (blank / wall / arrow).\\nWhen you\\'re ready, press \"Test My Model\".');\n      setPromptIsHTML(false);\n      setFeedback('');\n      setFeedbackClass('');\n      setLogEntries([]);\n      prevQuestionRef.current = null;\n      prevQuestionIndexRef.current = 0;\n      setShowHiddenModel(false);\n      setModelDidNotMatch(false);\n    }\n  }, [mode, game, mazeType, formatQuestionPrompt]);\n\n  const handleHoleClick = useCallback((holeNum) => {\n    if (animating) return;\n\n    if (mode === 'intro') {\n      const result = game.handleIntroAnswer(holeNum, false);\n      if (!result) return;\n      \n      animatePath(\n        result.info.path,\n        result.info.exitHole,\n        result.info.trapped,\n        result.animStartHole,\n        () => {\n          const feedbackResult = result.after();\n          if (feedbackResult) {\n            setFeedback(feedbackResult.feedback);\n            setFeedbackClass(feedbackResult.feedbackClass);\n            \n            if (feedbackResult.isCorrect !== undefined) {\n              // Update score display will happen automatically via game state\n              setTimeout(() => {\n                if (game.questionIndex < game.TOTAL_QUESTIONS) {\n                  // Get next question\n                  game.nextQuestion(game.mapping);\n                  // Question will be set in state, we'll update prompt in useEffect\n                } else {\n                  setPrompt('Game over. You\\'ve answered all 8 questions.');\n                  setPromptIsHTML(false);\n                  // Score is already updated in the hook, but we need to account for the current answer\n                  const finalScore = feedbackResult.isCorrect ? game.score + 1 : game.score;\n                  setFeedback(`You made ${finalScore} out of ${game.TOTAL_QUESTIONS} correct predictions.`);\n                  setFeedbackClass('');\n                }\n                \n                setTimeout(() => {\n                  if (game.questionIndex < game.TOTAL_QUESTIONS) {\n                    setFeedback('');\n                    setFeedbackClass('');\n                  }\n                }, 3000);\n              }, 1800);\n            }\n          }\n        },\n        gridToDraw\n      );\n    } else {\n      const { info, probeCount } = game.handleInferenceProbe(holeNum);\n      animateInferenceProbe(\n        holeNum,\n        info,\n        () => {\n          if (info.trapped) {\n            setFeedback(`The mouse from hole ${holeNum} is stuck in the house forever.`);\n          } else {\n            setFeedback(`The mouse from hole ${holeNum} came out of hole ${info.exitHole}.`);\n          }\n          setFeedbackClass('');\n          const entry = info.trapped\n            ? `From ${holeNum} → (stuck inside)`\n            : `From ${holeNum} → ${info.exitHole}`;\n          setLogEntries(prev => [...prev, entry]);\n        },\n        holeRefs.current\n      );\n    }\n  }, [mode, animating, game, animatePath, animateInferenceProbe, gridToDraw, mazeType, formatQuestionPrompt]);\n\n  const handleNoExitClick = useCallback(() => {\n    if (animating || mode !== 'intro') return;\n    const result = game.handleIntroAnswer(null, true);\n    if (!result) return;\n    \n    animatePath(\n      result.info.path,\n      result.info.exitHole,\n      result.info.trapped,\n      result.animStartHole,\n      () => {\n        const feedbackResult = result.after();\n        if (feedbackResult) {\n          setFeedback(feedbackResult.feedback);\n          setFeedbackClass(feedbackResult.feedbackClass);\n          \n          setTimeout(() => {\n            if (game.questionIndex < game.TOTAL_QUESTIONS) {\n              game.nextQuestion(game.mapping);\n              // Question will be set in state, we'll update prompt in useEffect\n            } else {\n              setPrompt('Game over. You\\'ve answered all 8 questions.');\n              setPromptIsHTML(false);\n              // Score is already updated in the hook, but we need to account for the current answer\n              const finalScore = feedbackResult.isCorrect ? game.score + 1 : game.score;\n              setFeedback(`You made ${finalScore} out of ${game.TOTAL_QUESTIONS} correct predictions.`);\n              setFeedbackClass('');\n            }\n            \n            setTimeout(() => {\n              if (game.questionIndex < game.TOTAL_QUESTIONS) {\n                setFeedback('');\n                setFeedbackClass('');\n              }\n            }, 3000);\n          }, 1800);\n        }\n      },\n      gridToDraw\n    );\n  }, [animating, mode, game, animatePath, gridToDraw, mazeType, formatQuestionPrompt]);\n\n  const handleCanvasClick = useCallback((r, c) => {\n    if (mode !== 'inference' || animating) return;\n    \n    // If showing hidden model, switch back to user's model when they edit\n    if (showHiddenModel) {\n      setShowHiddenModel(false);\n    }\n    \n    let val = game.modelGrid[r][c];\n    if (mazeType === 'walls') {\n      const seq = ['', '/', '\\\\'];\n      let idx = seq.indexOf(val);\n      if (idx === -1) idx = 0;\n      val = seq[(idx + 1) % seq.length];\n    } else {\n      const seq = ['', 'U', 'R', 'D', 'L'];\n      let idx = seq.indexOf(val);\n      if (idx === -1) idx = 0;\n      val = seq[(idx + 1) % seq.length];\n    }\n    game.updateModelGrid(r, c, val);\n  }, [mode, animating, game, mazeType, showHiddenModel]);\n\n  const handleTestModel = useCallback(() => {\n    if (mode !== 'inference') return;\n    const result = game.testModel();\n    console.log('handleTestModel result:', result);\n    setFeedback(result.feedback);\n    setFeedbackClass('');\n    // Show \"Show Hidden Model\" button if model didn't match perfectly\n    const shouldShowButton = result.didNotMatch === true;\n    console.log('shouldShowButton:', shouldShowButton, 'result.didNotMatch:', result.didNotMatch);\n    setModelDidNotMatch(shouldShowButton);\n    // Reset show hidden model when testing again\n    setShowHiddenModel(false);\n  }, [mode, game]);\n\n  const handleShowHiddenModel = useCallback(() => {\n    setShowHiddenModel(true);\n  }, []);\n\n  return (\n    <div className={styles.app}>\n      <div className={styles.header}>\n        <img \n          src={(process.env.PUBLIC_URL || '.') + '/MouseInAHole.png'} \n          alt=\"Mouse Mazes Logo\" \n          className={styles.logo}\n        />\n        <h1 className={styles.title}>Mouse Mazes</h1>\n      </div>\n      <GameControls\n        mode={mode}\n        mazeType={mazeType}\n        level={level}\n        onModeChange={handleModeChange}\n        onMazeTypeChange={handleMazeTypeChange}\n        onLevelChange={handleLevelChange}\n        onNewGame={handleNewGame}\n      />\n      <div className={styles.gameArea}>\n        <GameBoard\n          mode={mode}\n          gridToDraw={gridToDraw}\n          animating={animating}\n          onHoleClick={handleHoleClick}\n          onCanvasClick={handleCanvasClick}\n          mouseMarkerRef={mouseMarkerRef}\n          holeRefs={holeRefs}\n          canvasRef={canvasRef}\n        />\n        <SidePanel\n          mode={mode}\n          mazeType={mazeType}\n          prompt={prompt}\n          promptIsHTML={promptIsHTML}\n          feedback={feedback}\n          feedbackClass={feedbackClass}\n          score={game.score}\n          questionIndex={game.questionIndex}\n          totalQuestions={game.TOTAL_QUESTIONS}\n          onTestModel={handleTestModel}\n          onNoExitClick={handleNoExitClick}\n          logEntries={logEntries}\n          questionHistory={questionHistory}\n          onShowHiddenModel={handleShowHiddenModel}\n          showHiddenModelButton={(() => {\n            const shouldShow = modelDidNotMatch && !showHiddenModel;\n            console.log('SidePanel prop calculation - modelDidNotMatch:', modelDidNotMatch, 'showHiddenModel:', showHiddenModel, 'shouldShow:', shouldShow);\n            return shouldShow;\n          })()}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}